# OTA升级文件传输效率提升分析
OTA文件传输升级的工程中，如下的几个参数可以提供OTA文件传输的效率；
## （1） ble 中 requestConnectionPriority这个方法 修改设备连接参数  CONNECTION PRIORITY HIGH 
``CONNECTION PRIORITY BALANCED : 0 ``
默认的值 ，ble建议的设备连接参数
对应的连接时间间隔取值范围为: 30ms-50ms (24-40个单位)
对应的从机延时取值为: 0ms (0个单位)
对应的监控超时取值为: 20s ) 

``CONNECTION PRIORITY HIGH: 1``
连接快的值，当需要跟设备进行大的数据传输时设置该值，当传输完成后需要设置为
对应的连接时间间隔取值范围为: 11.25ms-15ms (9-12个单位)。
对应的从机延时取值为: 0ms (0个单位)
对应的监控超时取值为: 20s () 

``CONNECTION PRIORITY LOW POWER: 2``
低功耗值
对应的连接时间间隔取值范围为: 100ms-125ms (80-100个单位)
对应的从机延时取值为: 2.5ms (2个单位)
对应的监控超时取值为: 20s (以10ms为一个单位)

## （2） 蓝牙从机的 设备吞吐率的配置参数建议设置为 50KB/s  （或者设置为 100KB/s）,
 &nbsp; &nbsp;&nbsp;&nbsp; 在应对OTA文件传输的场景下，从机设备的吞吐量会决定APP 单位时间内能够写出多少个包，
如果从机的吞吐率太低，则会造成APP端在发送指令的时候，android端的写出指令锁处于lock状态，
而直接造成下一包写出失败的情况，如果下一包写出失败了，建议用户延迟50ms 再次写出待写出的数据包；

## （3）蓝牙仪表端不要在协议栈层面，随意打印日志，这里可能也会降低协议栈的吞吐率，避免在协议栈层面
进行可能造成协议栈Block或停顿的操作。
